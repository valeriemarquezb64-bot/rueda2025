<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci칩n Gastron칩mica - Rueda 2025</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f0f2f5; }
        
        /* CONTENIDO BLOQUEADO INICIALMENTE (CANDADO) */
        #contenido-principal {
            filter: blur(10px);
            pointer-events: none;
            transition: all 0.5s ease;
        }

        .jurado-container {
            max-width: 800px;
            margin: 40px auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        /* ZONA DE BIENVENIDA */
        .welcome-banner {
            background-color: #e3f2fd;
            color: #0D47A1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-family: 'Montserrat';
            font-size: 1.2rem;
            margin-bottom: 20px;
            display: none; /* Oculto al inicio */
            border-left: 5px solid #0D47A1;
        }

        /* ESTILOS DE LA R칔BRICA */
        .rubrica-item {
            background: #fff3e0; 
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #ff6f00;
        }
        .rubrica-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            color: #d84315;
            margin-bottom: 5px;
            font-weight: 700;
        }
        .rubrica-desc {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 15px;
            font-style: italic;
        }
        .rating-group {
            display: flex;
            justify-content: space-between;
            max-width: 300px;
        }
        .rating-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            color: #555;
        }
        .rating-label input {
            margin-bottom: 5px;
            transform: scale(1.3);
            cursor: pointer;
            accent-color: #ff6f00;
        }
        .header-jurado {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="modal-acceso" class="modal-overlay" style="visibility: visible; opacity: 1; z-index: 9999; background: rgba(5, 30, 71, 0.95);">
        <div class="modal-content" style="text-align: center; max-width: 400px;">
            <div style="font-size: 4rem; color: var(--primary-blue); margin-bottom: 15px;">
                <i class="fa-solid fa-lock"></i>
            </div>
            <h2 style="color: var(--dark-blue); margin-bottom: 10px;">Acceso Restringido</h2>
            <p style="color: #666; margin-bottom: 20px;">Esta secci칩n es exclusiva para Jurados. Ingresa la contrase침a para continuar.</p>
            
            <input type="password" id="input-clave" placeholder="Contrase침a" style="width: 100%; padding: 12px; border: 2px solid #ccc; border-radius: 8px; font-size: 1.1rem; text-align: center; margin-bottom: 15px;">
            
            <button onclick="verificarClave()" class="btn btn-primary" style="width: 100%; cursor: pointer;">Ingresar</button>
            <p id="mensaje-error" style="color: red; display: none; margin-top: 10px; font-weight: bold;">Contrase침a incorrecta</p>
            
            <br><br>
            <a href="index.html" style="color: #999; text-decoration: none; font-size: 0.9rem;">Volver al inicio</a>
        </div>
    </div>

    <div id="contenido-principal">
        <div class="container jurado-container">
            <div class="header-jurado">
                <div style="font-size: 3rem; color: #ff6f00; margin-bottom: 10px;">
                    <i class="fa-solid fa-utensils"></i>
                </div>
                <h2 style="color: #C62828; font-family: 'Montserrat';">Evaluaci칩n Gastron칩mica</h2>
                <p>Califica la experiencia culinaria y cultural de cada pa칤s.</p>
            </div>

            <form id="form-jurado" action="https://api.sheetmonkey.io/form/ixCo2LBLQZePSrvB8KzNyX" method="POST">
                
                <div id="zona-identidad">
                    <div class="form-group">
                        <label>Nombre del Jurado</label>
                        <input type="text" id="nombre_jurado" name="nombre_jurado" placeholder="Tu nombre completo" required>
                    </div>
                    <button type="button" id="btn-iniciar-evaluacion" class="btn btn-primary" style="width: 100%; background-color: #0D47A1;">COMENZAR EVALUACI칍N</button>
                </div>

                <div id="mensaje-bienvenida" class="welcome-banner">
                    游녦 Bienvenido, <span id="nombre-display" style="font-weight: 900;">Jurado</span>
                </div>

                <div id="zona-evaluacion" class="hidden">
                    <div class="form-group" style="margin-top: 20px;">
                        <label style="font-size: 1.1rem; color: #0D47A1;">Selecciona la Mesa / Pa칤s a Evaluar:</label>
                        <select id="pais_evaluado" name="pais_evaluado" required style="font-size: 1.1rem; padding: 15px;">
                            <option value="" disabled selected>Selecciona...</option>
                            <option value="Argentina">Argentina 游뷣릖</option>
                            <option value="Brasil">Brasil 游游</option>
                            <option value="Canad치">Canad치 游뻟릖</option>
                            <option value="China">China 游뻟릖</option>
                            <option value="Colombia">Colombia 游뻟릖</option>
                            <option value="Chile">Chile 游뻟릖</option>
                            <option value="EE.UU.">EE.UU. 游쥟릖</option>
                            <option value="Espa침a">Espa침a 游쀯릖</option>
                            <option value="Francia">Francia 游游</option>
                            <option value="Italia">Italia 游쉻릖</option>
                            <option value="Jap칩n">Jap칩n 游游</option>
                            <option value="M칠xico">M칠xico 游쓇릖</option>
                            <option value="Per칰">Per칰 游왫릖</option>
                            <option value="Portugal">Portugal 游왫릖</option>
                            <option value="Puerto Rico">Puerto Rico 游왫릖</option>
                            <option value="Tailandia">Tailandia 游좷릖</option>
                        </select>
                    </div>

                    <h3 style="margin: 30px 0 15px; color: #d84315;">Criterios de Evaluaci칩n (1 a 5)</h3>

                    <div class="rubrica-item">
                        <div class="rubrica-title">1. Autenticidad Cultural</div>
                        <div class="rubrica-desc">쮼l plato y la ambientaci칩n reflejan fielmente las tradiciones del pa칤s representado?</div>
                        <div class="rating-group">
                            <label class="rating-label"><input type="radio" name="autenticidad_cultural" value="1" required>1</label>
                            <label class="rating-label"><input type="radio" name="autenticidad_cultural" value="2">2</label>
                            <label class="rating-label"><input type="radio" name="autenticidad_cultural" value="3">3</label>
                            <label class="rating-label"><input type="radio" name="autenticidad_cultural" value="4">4</label>
                            <label class="rating-label"><input type="radio" name="autenticidad_cultural" value="5">5</label>
                        </div>
                    </div>

                    <div class="rubrica-item">
                        <div class="rubrica-title">2. Plato T칤pico</div>
                        <div class="rubrica-desc">Selecci칩n adecuada de los ingredientes y fidelidad a la receta tradicional.</div>
                        <div class="rating-group">
                            <label class="rating-label"><input type="radio" name="plato_tipico" value="1" required>1</label>
                            <label class="rating-label"><input type="radio" name="plato_tipico" value="2">2</label>
                            <label class="rating-label"><input type="radio" name="plato_tipico" value="3">3</label>
                            <label class="rating-label"><input type="radio" name="plato_tipico" value="4">4</label>
                            <label class="rating-label"><input type="radio" name="plato_tipico" value="5">5</label>
                        </div>
                    </div>

                    <div class="rubrica-item">
                        <div class="rubrica-title">3. Presentaci칩n y Creatividad</div>
                        <div class="rubrica-desc">Emplatado, est칠tica visual y originalidad en la exhibici칩n de la muestra gastron칩mica.</div>
                        <div class="rating-group">
                            <label class="rating-label"><input type="radio" name="presentacion_creatividad" value="1" required>1</label>
                            <label class="rating-label"><input type="radio" name="presentacion_creatividad" value="2">2</label>
                            <label class="rating-label"><input type="radio" name="presentacion_creatividad" value="3">3</label>
                            <label class="rating-label"><input type="radio" name="presentacion_creatividad" value="4">4</label>
                            <label class="rating-label"><input type="radio" name="presentacion_creatividad" value="5">5</label>
                        </div>
                    </div>

                    <div class="rubrica-item">
                        <div class="rubrica-title">4. Sabor y Calidad</div>
                        <div class="rubrica-desc">Balance de sabores, texturas, temperatura y calidad general de la preparaci칩n.</div>
                        <div class="rating-group">
                            <label class="rating-label"><input type="radio" name="sabor_calidad" value="1" required>1</label>
                            <label class="rating-label"><input type="radio" name="sabor_calidad" value="2">2</label>
                            <label class="rating-label"><input type="radio" name="sabor_calidad" value="3">3</label>
                            <label class="rating-label"><input type="radio" name="sabor_calidad" value="4">4</label>
                            <label class="rating-label"><input type="radio" name="sabor_calidad" value="5">5</label>
                        </div>
                    </div>

                    <div class="rubrica-item">
                        <div class="rubrica-title">5. Explicaci칩n e Interacci칩n</div>
                        <div class="rubrica-desc">Claridad al explicar el plato, historia detr치s de la receta y amabilidad con el jurado.</div>
                        <div class="rating-group">
                            <label class="rating-label"><input type="radio" name="explicacion_interaccion" value="1" required>1</label>
                            <label class="rating-label"><input type="radio" name="explicacion_interaccion" value="2">2</label>
                            <label class="rating-label"><input type="radio" name="explicacion_interaccion" value="3">3</label>
                            <label class="rating-label"><input type="radio" name="explicacion_interaccion" value="4">4</label>
                            <label class="rating-label"><input type="radio" name="explicacion_interaccion" value="5">5</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Observaciones Gastron칩micas</label>
                        <textarea id="observaciones" name="observaciones" rows="3" placeholder="Comentarios..." style="width: 100%; padding: 10px; border: 2px solid #eee; border-radius: 8px;"></textarea>
                    </div>

                    <button type="submit" class="btn btn-submit" style="background-color: #ff6f00; width: 100%; padding: 15px; border: none; border-radius: 50px; color: white; font-weight: bold; margin-top: 20px; cursor: pointer; font-size: 1.1rem;">ENVIAR CALIFICACI칍N</button>
                </div>
            </form>

            <div style="text-align: center; margin-top: 20px;">
                <button onclick="abrirConfirmacionSalida()" style="background:none; border:none; color: #666; text-decoration: underline; cursor: pointer; font-size: 1rem;">Cerrar Sesi칩n y Salir</button>
            </div>
        </div>
    </div>

    <div id="modal-decision" class="modal-overlay" style="z-index: 5000;">
        <div class="modal-content" style="text-align: center; max-width: 500px;">
            <div style="font-size: 4rem; color: #ff6f00; margin-bottom: 15px;">
                <i class="fa-solid fa-utensils"></i>
            </div>
            <h2 style="color: var(--dark-blue); margin-bottom: 10px;">춰Degustaci칩n Registrada!</h2>
            <p style="color: #666; margin-bottom: 25px;">쯈u칠 deseas hacer ahora?</p>
            
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn btn-primary" onclick="continuarEvaluando()" style="width: 100%; cursor: pointer; background-color: #0D47A1;">
                    <i class="fa-solid fa-arrow-rotate-right"></i> Evaluar el siguiente pa칤s
                </button>
                <button class="btn btn-outline" onclick="terminarEvaluacion()" style="width: 100%; cursor: pointer; color: #C62828; border-color: #C62828;">
                    <i class="fa-solid fa-door-open"></i> Cerrar Sesi칩n y Salir
                </button>
            </div>
        </div>
    </div>

    <div id="modal-confirmacion" class="modal-overlay" style="z-index: 6000;">
        <div class="modal-content" style="text-align: center; max-width: 400px;">
            <div style="font-size: 4rem; color: #ff9800; margin-bottom: 15px;">
                <i class="fa-solid fa-circle-exclamation"></i>
            </div>
            <h2 style="color: var(--dark-blue); margin-bottom: 10px;">쮺errar Sesi칩n?</h2>
            <p style="color: #666; margin-bottom: 25px;">Si sales ahora, tendr치s que volver a ingresar tu nombre y contrase침a.</p>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-outline" onclick="cerrarModalConfirmacion()" style="border-color: #999; color: #666;">No, volver</button>
                <button class="btn btn-primary" onclick="terminarEvaluacion()" style="background-color: var(--primary-red); border-color: var(--primary-red);">S칤, salir</button>
            </div>
        </div>
    </div>

    <script>
        // --- SEGURIDAD: CONTRASE칌A ---
        const CLAVE_CORRECTA = "Cultur@.2025"; 
        const modalAcceso = document.getElementById('modal-acceso');
        const contenidoPrincipal = document.getElementById('contenido-principal');
        const inputClave = document.getElementById('input-clave');
        const mensajeError = document.getElementById('mensaje-error');

        function verificarClave() {
            if (inputClave.value === CLAVE_CORRECTA) {
                modalAcceso.style.opacity = '0';
                setTimeout(() => {
                    modalAcceso.style.visibility = 'hidden';
                    contenidoPrincipal.style.filter = 'none';
                    contenidoPrincipal.style.pointerEvents = 'auto';
                }, 300);
            } else {
                mensajeError.style.display = 'block';
                inputClave.style.borderColor = 'red';
            }
        }

        inputClave.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') verificarClave();
        });

        // --- L칍GICA DE SESI칍N JURADO ---
        const btnIniciar = document.getElementById('btn-iniciar-evaluacion');
        const inputNombre = document.getElementById('nombre_jurado');
        const zonaIdentidad = document.getElementById('zona-identidad');
        const mensajeBienvenida = document.getElementById('mensaje-bienvenida');
        const zonaEvaluacion = document.getElementById('zona-evaluacion');
        const nombreDisplay = document.getElementById('nombre-display');

        // 1. INICIAR SESI칍N Y BLOQUEAR NOMBRE
        btnIniciar.addEventListener('click', () => {
            const nombre = inputNombre.value.trim();
            if(nombre) {
                // Ocultar zona de input, mostrar saludo
                zonaIdentidad.style.display = 'none';
                nombreDisplay.textContent = nombre;
                mensajeBienvenida.style.display = 'block';
                
                // Mostrar r칰brica
                zonaEvaluacion.classList.remove('hidden');
            } else {
                alert("Por favor ingresa tu nombre para comenzar.");
            }
        });

        // --- MANEJO DE FORMULARIO ---
        const form = document.getElementById('form-jurado');
        const modalDecision = document.getElementById('modal-decision');
        const modalConfirmacion = document.getElementById('modal-confirmacion');

        // 2. CONTINUAR EVALUANDO (Reset inteligente)
        function continuarEvaluando() {
            modalDecision.style.visibility = 'hidden';
            modalDecision.style.opacity = '0';

            // Limpiar solo los campos de evaluaci칩n (radios, select pa칤s, comentarios)
            document.getElementById('pais_evaluado').value = "";
            document.getElementById('observaciones').value = "";
            
            // Desmarcar todos los radio buttons
            const radios = document.querySelectorAll('input[type="radio"]');
            radios.forEach(radio => radio.checked = false);

            // Scroll arriba
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 3. TERMINAR (SALIR)
        function terminarEvaluacion() {
            window.location.href = 'index.html';
        }

        // 4. MODALES DE SALIDA
        function abrirConfirmacionSalida() {
            modalConfirmacion.style.visibility = 'visible';
            modalConfirmacion.style.opacity = '1';
        }

        function cerrarModalConfirmacion() {
            modalConfirmacion.style.visibility = 'hidden';
            modalConfirmacion.style.opacity = '0';
        }

        // 5. ENV칈O DE DATOS
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = form.querySelector('.btn-submit');
            const originalText = btn.innerText;
            
            btn.innerText = "Enviando notas..."; 
            btn.disabled = true;

            // Asegurarnos de que el nombre viaje aunque el input est칠 oculto
            // (Como no borramos el input, solo lo ocultamos con CSS, el valor sigue ah칤)
            const data = new FormData(form);

            fetch(form.action, {
                method: form.method,
                body: data,
                headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (response.ok) {
                    modalDecision.style.visibility = 'visible';
                    modalDecision.style.opacity = '1';
                } else {
                    alert("Error al guardar. Intenta de nuevo.");
                }
            }).catch(error => {
                alert("Error de conexi칩n.");
            }).finally(() => {
                btn.innerText = originalText;
                btn.disabled = false;
            });
        });
    </script>

</body>
</html>